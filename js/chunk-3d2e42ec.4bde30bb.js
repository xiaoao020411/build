(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d2e42ec"],{4298:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"honor_add"},[i("div",{staticClass:"head"},[1==t.typeid?i("div",[i("p",[t._v(t._s(void 0==this.id?"添加作品信息":"编辑作品信息"))])]):2==t.typeid?i("div",[i("p",[t._v(t._s(void 0==this.id?"添加活动信息":"编辑活动信息"))])]):3==t.typeid?i("div",[i("p",[t._v(t._s(void 0==this.id?"添加赛事信息":"编辑赛事信息"))])]):4==t.typeid?i("div",[i("p",[t._v(t._s(void 0==this.id?"添加考级信息":"编辑考级信息"))])]):i("div",[i("p",[t._v(t._s(void 0==this.id?"添加荣誉信息":"编辑荣誉信息"))])])]),i("div",{staticClass:"form"},[i("el-form",{ref:"from",attrs:{model:t.from,rules:t.rules,"label-width":"80px"}},[i("div",{staticClass:"top"},[i("div",{staticClass:"top_left"},[i("el-form-item",{attrs:{prop:"title",label:"标题"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:t.from.title,callback:function(e){t.$set(t.from,"title",e)},expression:"from.title"}})],1),i("el-form-item",{attrs:{prop:"comment",label:"描述"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:t.from.comment,callback:function(e){t.$set(t.from,"comment",e)},expression:"from.comment"}})],1),i("el-form-item",{attrs:{prop:"photo",label:"封面图片"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/upload/add","on-success":t.handleAvatarSuccess,"show-file-list":!1,headers:t.headers}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传图片")]),t.from.photo?i("img",{staticStyle:{width:"30px",height:"30px"},attrs:{src:t.$config.baseimg+t.from.photo,alt:""}}):t._e()],1)],1),i("el-form-item",{attrs:{prop:"videos",label:"课程视频"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/upload/add",multiple:"","show-file-list":!1,"on-success":t.handSuccess,headers:t.headers}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传视频")]),t._l(t.from.videos,(function(e,s){return i("video",{key:s,staticStyle:{width:"30px"},attrs:{src:t.$config.baseimg+e.filename}})}))],2)],1)],1),i("div",{staticClass:"top_right"},[i("el-form-item",{attrs:{prop:"pictures"}},[i("div",[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload/add","show-file-list":!1,"on-success":t.leAvatarSuccess,headers:t.headers,multiple:""}},[i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),i("p",[t._v("上传照片")])],1)]),i("div",{staticClass:"img"},t._l(t.from.pictures,(function(e,s){return i("img",{key:s,staticStyle:{width:"50px",height:"50px","margin-top":"10px"},attrs:{src:t.$config.baseimg+e.filename,alt:""}})})),0)],1)]),i("div",{staticClass:"bottom"},[i("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{prop:"content",label:"详细信息"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{type:"textarea"},model:{value:t.from.content,callback:function(e){t.$set(t.from,"content",e)},expression:"from.content"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitFrom("from")}}},[t._v("确定")])],1)],1)])],1)])},o=[],r=(i("ac1f"),i("5319"),i("4d63"),i("25f0"),i("b0c0"),{data:function(){return Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t},{headers:{token:sessionStorage.getItem("token")},from:{id:0,title:"",typeid:this.$route.params.typeid,photo:"",comment:"",content:"",state:0,videos:[],pictures:[]},id:"",rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],comment:[{required:!0,message:"请输入描述",trigger:"blur"}],photo:[{required:!0,message:"请选择封面图片",trigger:"blur"}],videos:[{required:!0,message:"请选择上传视频",trigger:"blur"}],pictures:[{required:!0,message:"请选择封面图片",trigger:"blur"}],content:[{required:!0,message:"请输入详细信息",trigger:"blur"}]}}},watch:{$route:function(t,e){console.log(t,e);var i=this;t.path=="/muke/memorabiliaAdd/"+this.$route.params.typeid&&(i.sizeForm={id:0,title:"",typeid:this.$route.params.typeid,photo:"",comment:"",content:"",state:0,videos:[],pictures:[]})}},created:function(){this.getModel()},methods:{getModel:function(){if(this.id=this.$route.query.id,void 0!=this.id){var t=this;t.$http.get("/api/records/get?id="+t.id).then((function(e){t.from=e.data}))}},submitFrom:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;var i=e;i.from.addtime=(new Date).Format("yyyy-MM-dd HH:mm:ss"),i.$http.post("/api/records/add",i.from).then((function(t){void 0==i.id?(console.log(t),i.$router.push({path:"/muke/memorabilia/"+e.$route.params.typeid}),i.$message({message:"添加成功",type:"success"})):(console.log(t),i.$router.push({path:"/muke/memorabilia/"+e.$route.params.typeid}),i.$message({message:"编辑成功",type:"success"}))}))}))},leAvatarSuccess:function(t,e){if(1e4==t.errCode){this.from.pictures.push({filename:"",oldfilename:e.name});var i=this.from.pictures.length-1;this.from.pictures[i].filename=t.data}},handSuccess:function(t,e){if(console.log(t),1e4==t.errCode){this.from.videos.push({filename:"",oldfilename:e.name});var i=this.from.videos.length-1;this.from.videos[i].filename=t.data}},handleAvatarSuccess:function(t,e){1e4==t.errCode&&(this.from.photo=t.data)}}}),a=r,l=(i("dc69"),i("2877")),n=Object(l["a"])(a,s,o,!1,null,null,null);e["default"]=n.exports},ad30:function(t,e,i){},dc69:function(t,e,i){"use strict";i("ad30")}}]);
//# sourceMappingURL=chunk-3d2e42ec.4bde30bb.js.map